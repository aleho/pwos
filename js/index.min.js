var PWOS_VERSION=1515348207,PWOS_DATE="20180107_190327";"undefined"==typeof window&&(exports.PWOS_VERSION=PWOS_VERSION,exports.PWOS_DATE=PWOS_DATE);var ScrollMonitor=function(t){t&&(this.uid=++ScrollMonitor.uid,this.$element=t)};ScrollMonitor.uid=0,ScrollMonitor.prototype.isMonitoring=!1,ScrollMonitor.prototype.uid=0,ScrollMonitor.prototype.$element=null,ScrollMonitor.prototype._isScrolledTo=function(){let t=this.$element.offset().top;return $(window).scrollTop()+$(window).height()>t},ScrollMonitor.prototype.start=function(){this.uid&&!this.isMonitoring&&(this.isMonitoring=!0,$(window).on("scroll.lazyload-"+this.uid,function(){this._isScrolledTo(this.$element)&&(this.stop(),$(window).trigger("scrolled-to",[this.$element,this]))}.bind(this)))},ScrollMonitor.prototype.stop=function(){this.uid&&this.isMonitoring&&(this.isMonitoring=!1,$(window).off("scroll.lazyload-"+this.uid))},function(t){let e;"ontouchstart"in document.documentElement&&(t("body").addClass("hastouch"),t(document).on("touchend","[title]",function(){!function(t){e&&(clearTimeout(e.data("tt-timeout")),e.data("tt-timeout",null)),t.is(e)||(e&&e.tooltip("dispose"),t.tooltip("show")),e=t;let o=setTimeout(function(){clearTimeout(t.data("tt-timeout")),t.data("tt-timeout",null),t.tooltip("dispose"),e=null},2e3);t.data("tt-timeout",o)}(t(this))}))}(jQuery);var PWoSDb=function(){let t=function(t){this.data=t};t.prototype.filter=function*(t){let e=(t=t||{}).title?new RegExp(t.title,"i"):null,o=t.url?new RegExp(t.url,"i"):null;for(let t of this.data)(!e||t.title&&t.title.match(e))&&(!o||t.url&&t.url.match(o))&&(yield t)};let e=null;return{load:function(o){let l=$.Deferred();return o?($.ajax({type:"GET",dataType:"json",url:o}).done(function(o){o?(e=new t(o),l.resolve(e)):l.reject()}).fail(function(){e=null,l.reject()}),l.promise()):(l.reject(),l.promise())}}}(),Table=function(t,e){t&&e&&(this.$element=t,this.$rowTemplate=e)};Table.MIN_LEN_BAD=5,Table.MAX_LEN_BAD=16,Table.SHAME_SCORE_BAD=3,Table.ATTRS=["alpha","digit","space","special","case","changeable"],Table.prototype.$element=null,Table.prototype.$rowTemplate=null,Table.prototype.empty=function(){this.$element.empty()},Table.prototype.addRow=function(t){let e=this.$rowTemplate.clone().appendTo(this.$element),o=0;e.find(".title").text(t.title),e.find("a.url").attr("href",t.url).find(".url-text").text(t.url.replace(/^https?\:\/\//i,"")),e.find(".attr.min").text(t.pw.min).toggleClass("text-danger",t.pw.min<=Table.MIN_LEN_BAD),e.find(".attr.max").text(t.pw.max).toggleClass("text-danger",t.pw.max<=Table.MAX_LEN_BAD),t.pw.min<=Table.MIN_LEN_BAD&&o++,t.pw.max<=Table.MAX_LEN_BAD&&o++;for(let l of Table.ATTRS){let n,i=e.find(".attr."+l);(n=t.pw[l]?i.find("i.attr-"+t.pw[l]):i.find("i.attr-false"))&&n.length&&(n.removeClass("hidden"),o++)}t.scoreplus&&(o+=t.scoreplus),e.find(".attr-score").text(o).toggleClass("text-danger",o>=Table.SHAME_SCORE_BAD)};var PWoS=function(t){const e=30,o="data/db.json?v="+PWOS_VERSION,l=(t(".filter"),new Table(t("#sites-list"),t("#site-template tr")));let n,i,a,r,s,d;function u(t){t=t||null,r=n.filter(t),l.empty(),c()}function c(){if(!r)return;let t=r.next(),o=0;for(;t&&!t.done&&t.value&&o<e;)l.addRow(t.value),t=r.next(),o++;d.addClass("hidden"),s.toggleClass("invisible",t.done),s.toggleClass("invisible",t.done),t.done?i.stop():i.start()}return{init:function(){t("#last-update").text(new Date(1e3*PWOS_VERSION)),t(".filter").keypress(function(e){13==e.which&&function(t){let e=t.data("filter"),o=t.val();!e||o.length<2&&0!=o.length||((a={})[e]=o,u(a))}(t(this))}),t(window).on("scrolled-to",function(t,e){d.removeClass("hidden"),setTimeout(function(){c()},10)}),s=t("#lazy-loading-info"),d=t("#lazy-loading-spinner"),i=new ScrollMonitor(t("#lazy-loading-anchor")),PWoSDb.load(o).done(function(t){n=t,u()}).fail(function(){d.addClass("hidden"),t("#content").append(t("<p>").addClass("alert alert-danger").text("Failed to load database"))})}}}(jQuery);